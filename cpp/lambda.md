
# lambda

## Introduction

    ラムダ式は毎回よくわからなくなるので、どういう構文を短縮して記述しているのか...などの理解を深めるためにまとめます。  

## ラムダ式とは

    C++におけるラムダ式とは、簡易的な関数オブジェクトをその場で定義するための機能を指します。  
    難しいことは考えないで、最初は「その場で関数作って呼び出せるぜ！」くらいの理解で良いと思います。  

## 良い点

    その場で関数を定義して呼び出すことが出来るので、クラス内の別の場所に関数を定義して呼び出す処理を書かなく良くなります。  

## 悪い点

    その場で関数作るので、std::functionなどに格納してクラス内で使ったりすると「この関数はどこで定義しているのだ？」とわけわかめになります。  
    使い捨ての関数を作る場合に重宝すると思います。  

## 例

    * ラムダ式1

``` c++
auto plus = [](int a, int b) { return a + b;}
int result = plus(2, 3);
```

    ラムダ式1では、引数a, bを取り、a + bの結果を返す関数を定義し、利用しています。  
    この関数は、以下のような定義を作成しているそうです。  

``` c++
struct F
{
  auto operator()(int a, int b) const -> decltype(a + b)
  {
    return a + b;
  }
};
```

    structを使って利用者側が知ることの出来ない構造体を自動定義してc++が利用できるようにしています。かしこい。  
    decltype はオペランドで指定した式の型を取得する機能を持っているらしいです。かしこい。  

## キャプチャ

    ラムダ式には、その外側に存在する変数を取得してラムダ式内で利用することの出来るキャプチャという機能があります。  
    キャプチャは参照 or コピーのどちらかを選ぶことが出来ます。  

| No | Notation  | detail                                                                       |
|----|-----------|------------------------------------------------------------------------------|
| 1  | [&]       | 外側の変数を参照し、ラムダ式の中で利用できる                                 |
| 2  | [=]       | 外側の変数をコピーし、ラムダ式の中で利用できる                               |
| 3  | [&x]      | 外側の変数「x」を参照し、ラムダ式の中で利用できる                            |
| 4  | [=x]      | 外側の変数「x」をコピーし、ラムダ式の中で利用できる                          |
| 5  | [&, x]    | 外側の変数を参照するけど変数「x」だけはコピーし、ラムダ式の中で利用できる    |
| 6  | [=, &x]   | 外側の変数をコピーするけど変数「x」だけは参照し、ラムダ式の中で利用できる    |
| 7  | [this]    | *thisのメンバを参照し、ラムダ式の中で利用できる                              |
| 8  | [this, x] | *thisのメンバを参照するけど変数「x」だけはコピーし、ラムダ式の中で利用できる |

    
